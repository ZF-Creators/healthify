<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Healthify | AI Chatbot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script defer src="{{ url_for('static', filename='chatbot.js') }}"></script>
</head>
<body class="chat-screen">
    <div class="chatbox">
        <div class="chat-header">
            ü©∫ Healthify AI Assistant
        </div>

        <div class="chat-history" id="chat-history">
            {% if user_input %}
                <div class="chat-bubble user">
                    <p>{{ user_input }}</p>
                </div>
            {% endif %}

            {% if prediction %}
                <div class="chat-bubble bot">
                    <p>I think you might have:</p>
                    <ul>
                        {% for disease, prob in prediction %}
                            <li>
                                <strong>{{ disease }}</strong> ‚Äî {{ '%.2f'|format(prob * 100) }}%<br>
                                <a href="https://www.google.com/search?q={{ disease|urlencode }} symptoms" target="_blank">üîç Read more</a>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            {% elif error %}
                <div class="chat-bubble bot error">
                    <p>{{ error }}</p>
                </div>
            {% endif %}
        </div>

        <form method="POST" class="chat-form">
            <textarea name="symptoms" placeholder="Describe your symptoms..." required></textarea>
            <button type="submit">Send</button>
        </form>
    </div>
</body>
</html>
